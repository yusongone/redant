<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>abf</title>
		<style>
			*{margin:0;padding:0;}
		</style>
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0, maximum-scale=1">
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<script src="/js/jquery.js"></script>
		<script src="/js/songgame.js"></script>
		<script>
			var SG=pagePrivate.SongGame;
			function init(){
				var imgData={
						"people":"/image/people.jpg"
						,"lb":"/image/lb.jpg"
				}
					SG.config({
						"box":document.getElementById("box")
					});
					SG.loadImg(imgData,function(){
						var stage=SG.createStage("song");
						window.ctx=stage.ctx;
							SG.changeStage(stage);

							stage.bindEvent("click",function(evt){
								var t=new Tank(stage,evt.x,evt.y);
								stage.addSpirit(t);
								//	t.walk();
								t.click(function(){
								});
					bindEvent(t);

							});
					});
			}

					function zd(stage){
						this.width=20;
						this.height=20;
					}
					zd.prototype.init=function(){
						this.setDraw("fire",function(){
							
						});
					}
					function Tank(stage,x,y){
						this.name=SG.getRandom();
						this.stage=stage;
						this.width=36;
						this.height=65;
						this.setLocal(x,y);
						SG.getSpirit().call(this);
						this.setDrawData();
					};
					SG.extendSpirit(Tank);
					Tank.prototype.setDrawData=function(json){
							var drawdata={};
							this.state="walk";
							this.setDraw("walk",{
								img:SG.Image.people,
								offsetX:30,
								offsetY:10,
								singleWidth:47,
								singleHeight:85,
								imgCount:5,
								delay:9
							});
							this.setDraw("run",{
								img:SG.Image.lb,
								offsetX:90,
								offsetY:10,
								singleWidth:47,
								singleHeight:85,
								imgCount:5,
								delay:9
							});
							this.setDraw("jump",{
								img:SG.Image.lb,
								offsetX:30,
								offsetY:10,
								singleWidth:47,
								singleHeight:85,
								imgCount:5,
								delay:9
							})
					}
								
			function bindEvent(t){
				document.addEventListener("keydown",function(event){
						if(event.keyCode==38){
							t.state="run";
						}else if(event.keyCode==39){
							t.state="walk";
						}else if(event.keyCode==37){
							var canva=t.stage.canva;
							canva.webkitRequestFullScreen();
						};
				});
			}

			
		</script>
	</head>
	<body onload="init()">
			<div id="box">
			</div>
	</body>
</html>
